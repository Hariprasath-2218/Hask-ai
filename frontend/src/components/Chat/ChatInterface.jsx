import React, { useEffect, useState } from 'react';
import { useSelector, useDispatch } from 'react-redux';
import { MessageCircle, History, Bot, Loader2, Send, User } from 'lucide-react';
import api from '../../services/api';
import { processMessage } from '../../utils/messageProcessor';

const ChatInterface = () => {
  const [messages, setMessages] = useState([]);
  const [inputMessage, setInputMessage] = useState('');
  const [loading, setLoading] = useState(false);
  const [history, setHistory] = useState([]);
  const [showHistory, setShowHistory] = useState(false);

  const dispatch = useDispatch();
  const personalDetails = useSelector((state) => state.personalDetails);

  useEffect(() => {
    console.log('Personal details updated:', personalDetails);
  }, [personalDetails]);

  useEffect(() => {
    loadChatHistory();
  }, []);

  const loadChatHistory = async () => {
    try {
      const response = await api.chat.getHistory();
      setHistory(response.chats || []);
    } catch (err) {
      console.error('Failed to load chat history:', err);
    }
  };

  // Enhanced format function to handle all programming languages and formats
  const formatResponse = (text) => {
    if (!text) return '';
    
    // First, handle code blocks with language specification
    let formatted = text.replace(/```(\w+)?\n?([\s\S]*?)```/g, (match, language, code) => {
      const lang = language || 'text';
      const trimmedCode = code.trim();
      
      // Language-specific styling
      const getLanguageClass = (lang) => {
        const langMap = {
          'javascript': 'language-javascript',
          'js': 'language-javascript',
          'python': 'language-python',
          'py': 'language-python',
          'html': 'language-html',
          'css': 'language-css',
          'java': 'language-java',
          'cpp': 'language-cpp',
          'c': 'language-c',
          'php': 'language-php',
          'ruby': 'language-ruby',
          'go': 'language-go',
          'rust': 'language-rust',
          'typescript': 'language-typescript',
          'ts': 'language-typescript',
          'json': 'language-json',
          'xml': 'language-xml',
          'sql': 'language-sql',
          'bash': 'language-bash',
          'shell': 'language-shell',
          'powershell': 'language-powershell',
          'yaml': 'language-yaml',
          'yml': 'language-yaml',
          'markdown': 'language-markdown',
          'md': 'language-markdown'
        };
        return langMap[lang.toLowerCase()] || 'language-text';
      };

      const langClass = getLanguageClass(lang);
      const langDisplay = lang.toUpperCase();
      
      return `<div class="code-block my-2 sm:my-4 border border-gray-200 rounded-lg overflow-hidden">
        <div class="bg-gray-800 text-white px-2 sm:px-4 py-2 text-xs font-mono flex justify-between items-center">
          <span>${langDisplay}</span>
          <button class="copy-btn text-gray-300 hover:text-white text-xs px-1 sm:px-2 py-1 rounded hover:bg-gray-700" onclick="copyToClipboard(this)">Copy</button>
        </div>
        <pre class="bg-gray-50 p-2 sm:p-4 overflow-x-auto text-xs sm:text-sm font-mono"><code class="${langClass}">${escapeHtml(trimmedCode)}</code></pre>
      </div>`;
    });

    // Handle inline code (after code blocks to avoid conflicts)
    formatted = formatted.replace(/`([^`]+)`/g, '<code class="bg-gray-100 px-1 sm:px-2 py-1 rounded text-xs sm:text-sm font-mono text-red-600">$1</code>');

    // Handle other markdown formatting
    formatted = formatted
      // Bold text
      .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>')
      // Italic text
      .replace(/\*(.*?)\*/g, '<em class="italic">$1</em>')
      // Headers
      .replace(/^### (.*$)/gm, '<h3 class="text-base sm:text-lg font-semibold mt-3 sm:mt-4 mb-2">$1</h3>')
      .replace(/^## (.*$)/gm, '<h2 class="text-lg sm:text-xl font-semibold mt-3 sm:mt-4 mb-2">$1</h2>')
      .replace(/^# (.*$)/gm, '<h1 class="text-xl sm:text-2xl font-bold mt-3 sm:mt-4 mb-2">$1</h1>')
      // Links
      .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="text-blue-600 hover:underline" target="_blank">$1</a>')
      // Strikethrough
      .replace(/~~(.*?)~~/g, '<del class="line-through">$1</del>');

    // Handle lists (after other formatting)
    const lines = formatted.split('\n');
    const processedLines = [];
    let inList = false;
    
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      
      // Numbered lists
      if (/^\d+\.\s/.test(line)) {
        if (!inList) {
          processedLines.push('<ol class="list-decimal ml-4 sm:ml-6 mb-2">');
          inList = 'ol';
        }
        const content = line.replace(/^\d+\.\s/, '');
        processedLines.push(`<li class="mb-1">${content}</li>`);
      }
      // Bullet points
      else if (/^[-*+]\s/.test(line)) {
        if (!inList) {
          processedLines.push('<ul class="list-disc ml-4 sm:ml-6 mb-2">');
          inList = 'ul';
        }
        const content = line.replace(/^[-*+]\s/, '');
        processedLines.push(`<li class="mb-1">${content}</li>`);
      }
      // Regular line
      else {
        if (inList) {
          processedLines.push(`</${inList}>`);
          inList = false;
        }
        if (line) {
          processedLines.push(line);
        } else {
          processedLines.push('<br>');
        }
      }
    }
    
    // Close any remaining list
    if (inList) {
      processedLines.push(`</${inList}>`);
    }

    return processedLines.join('\n');
  };

  const escapeHtml = (text) => {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  };

  const copyToClipboard = (button) => {
    const codeBlock = button.closest('.code-block');
    const code = codeBlock.querySelector('code').textContent;
    navigator.clipboard.writeText(code).then(() => {
      button.textContent = 'Copied!';
      setTimeout(() => {
        button.textContent = 'Copy';
      }, 2000);
    });
  };

  useEffect(() => {
    window.copyToClipboard = copyToClipboard;
  }, []);

  const sendMessage = async (e) => {
    e.preventDefault();
    if (!inputMessage.trim() || loading) return;

    const userMessage = { text: inputMessage, sender: 'user' };
    setMessages((prev) => [...prev, userMessage]);
    
    console.log('Sending message:', inputMessage);
    console.log('Current Redux state before processing:', personalDetails);
    
    const processResult = processMessage(inputMessage, personalDetails, dispatch);
    
    console.log('Process result:', processResult);
    
    if (processResult) {

      const botMessage = { 
        text: processResult.response, 
        sender: 'bot',
        isLocal: true 
      };
      setMessages((prev) => [...prev, botMessage]);
      setInputMessage('');
      return;
    }


    setInputMessage('');
    setLoading(true);

    try {
      const response = await api.chat.send(inputMessage);
      const botMessage = { text: response.response, sender: 'bot' };
      setMessages((prev) => [...prev, botMessage]);
      loadChatHistory();
    } catch (err) {
      setMessages((prev) => [
        ...prev,
        { text: 'Sorry, something went wrong.', sender: 'bot' },
      ]);
    } finally {
      setLoading(false);
    }
  };

  const loadHistoryConversation = (chat) => {
    setMessages([
      { text: chat.message, sender: 'user' },
      { text: chat.response, sender: 'bot' },
    ]);
    setShowHistory(false);
  };

  return (
    <div className="flex flex-col h-full bg-white">
      <div className="flex items-center justify-between p-3 sm:p-4 border-b bg-white shadow-sm">
        <h2 className="text-lg sm:text-xl font-semibold flex items-center gap-2 text-gray-800">
          <MessageCircle className="w-4 h-4 sm:w-5 sm:h-5 text-blue-600" /> 
          <span className="hidden xs:inline">Chat AI</span>
          <span className="xs:hidden">Chat</span>
        </h2>
        
        <div className="flex items-center gap-2">
          {/* Debug info */}
          <div className="text-xs text-gray-500 hidden sm:block">
            Stored: {personalDetails.name ? `Name: ${personalDetails.name}` : 'No name'}
          </div>
          <button
            onClick={() => setShowHistory(!showHistory)}
            className="p-2 text-gray-600 hover:text-gray-800 rounded-lg hover:bg-gray-100 transition-colors"
          >
            <History className="w-4 h-4 sm:w-5 sm:h-5" />
          </button>
        </div>
      </div>

      {showHistory && (
        <div className="border-b bg-white p-3 sm:p-4 shadow-sm">
          <h3 className="font-medium mb-2 text-gray-800 text-sm sm:text-base">Chat History</h3>
          <div className="space-y-2 max-h-32 sm:max-h-40 overflow-y-auto">
            {history.map((chat, index) => (
              <button
                key={index}
                onClick={() => loadHistoryConversation(chat)}
                className="w-full text-left p-2 sm:p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 text-xs sm:text-sm transition-colors"
              >
                <div className="truncate font-medium text-gray-800">{chat.message}</div>
                <div className="text-xs text-gray-500 mt-1">
                  {new Date(chat.timestamp).toLocaleDateString()}
                </div>
              </button>
            ))}
          </div>
        </div>
      )}

      <div className="flex-1 overflow-y-auto p-2 sm:p-4 space-y-3 sm:space-y-4">
        {messages.length === 0 && (
          <div className="text-center text-gray-400 py-8 sm:py-12">
            <svg className="w-12 h-12 sm:w-16 sm:h-16  mx-auto mb-4" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 907">
  <path d="M0 0 C337.92 0 675.84 0 1024 0 C1024 299.31 1024 598.62 1024 907 C686.08 907 348.16 907 0 907 C0 607.69 0 308.38 0 0 Z" fill="#FEFEFE" transform="translate(0,0)"/>
  <path d="M0 0 C3.77737005 3.02827135 6.0804079 6.02521014 7.8515625 10.609375 C7.8515625 11.269375 7.8515625 11.929375 7.8515625 12.609375 C8.5115625 12.609375 9.1715625 12.609375 9.8515625 12.609375 C12.6909677 16.28389938 13.8515625 17.87824081 13.8515625 22.609375 C14.5115625 22.609375 15.1715625 22.609375 15.8515625 22.609375 C16.09390625 23.14046875 16.33625 23.6715625 16.5859375 24.21875 C16.92109375 24.92515625 17.25625 25.6315625 17.6015625 26.359375 C18.08882813 27.40351563 18.08882813 27.40351563 18.5859375 28.46875 C19.76959796 30.69195678 19.76959796 30.69195678 21.7109375 32.3828125 C24.61698284 35.4055239 26.37573805 38.80920665 28.3515625 42.484375 C31.53929462 48.36063468 31.53929462 48.36063468 35.1328125 53.9921875 C36.8515625 56.609375 36.8515625 56.609375 36.8515625 58.609375 C37.5115625 58.609375 38.1715625 58.609375 38.8515625 58.609375 C41.8515625 64.359375 41.8515625 64.359375 41.8515625 66.609375 C42.5115625 66.609375 43.1715625 66.609375 43.8515625 66.609375 C45.578125 69.1640625 45.578125 69.1640625 47.4765625 72.484375 C48.42402344 74.12019531 48.42402344 74.12019531 49.390625 75.7890625 C50.8515625 78.609375 50.8515625 78.609375 50.8515625 80.609375 C51.5115625 80.609375 52.1715625 80.609375 52.8515625 80.609375 C55.59531921 83.56418992 55.8515625 84.38409408 55.8515625 88.609375 C56.5115625 88.609375 57.1715625 88.609375 57.8515625 88.609375 C59.32421875 90.65625 59.32421875 90.65625 60.9140625 93.359375 C61.70490234 94.68195313 61.70490234 94.68195313 62.51171875 96.03125 C63.67995737 98.2791727 64.38377032 100.13758424 64.8515625 102.609375 C65.5115625 102.609375 66.1715625 102.609375 66.8515625 102.609375 C68.2265625 104.453125 68.2265625 104.453125 69.8515625 107.109375 C70.78742188 108.62144531 70.78742188 108.62144531 71.7421875 110.1640625 C72.08185547 110.71932617 72.42152344 111.27458984 72.77148438 111.84667969 C74.69605375 114.98759083 76.6501721 118.11008255 78.6015625 121.234375 C79.02244141 121.90911865 79.44332031 122.5838623 79.87695312 123.27905273 C82.99585298 128.2689418 86.1573956 133.22985005 89.3515625 138.171875 C89.80490967 138.87441406 90.25825684 139.57695312 90.7253418 140.30078125 C93.00715146 143.82112521 95.32127317 147.31330048 97.69921875 150.76953125 C98.15554688 151.43718506 98.611875 152.10483887 99.08203125 152.79272461 C99.93960231 154.04277275 100.80491883 155.28756036 101.6796875 156.52563477 C104.40864751 160.50971239 105.76047991 163.97374842 106.8515625 168.609375 C107.5115625 168.609375 108.1715625 168.609375 108.8515625 168.609375 C110.30989568 170.64626981 111.62383301 172.65726367 112.9140625 174.796875 C113.27822266 175.37501953 113.64238281 175.95316406 114.01757812 176.54882812 C116.04972307 179.87313177 117.3767717 182.73069943 117.8515625 186.609375 C118.5115625 186.609375 119.1715625 186.609375 119.8515625 186.609375 C120.1815625 187.929375 120.5115625 189.249375 120.8515625 190.609375 C121.5115625 190.609375 122.1715625 190.609375 122.8515625 190.609375 C123.52311183 191.89850987 124.18865109 193.19077704 124.8515625 194.484375 C125.2228125 195.20367187 125.5940625 195.92296875 125.9765625 196.6640625 C126.8515625 198.609375 126.8515625 198.609375 126.8515625 200.609375 C127.5115625 200.609375 128.1715625 200.609375 128.8515625 200.609375 C130.140625 202.21875 130.140625 202.21875 131.4765625 204.359375 C131.92257812 205.05546875 132.36859375 205.7515625 132.828125 206.46875 C133.8515625 208.609375 133.8515625 208.609375 133.8515625 212.609375 C134.5115625 212.609375 135.1715625 212.609375 135.8515625 212.609375 C137.18017578 214.41357422 137.18017578 214.41357422 138.671875 216.9140625 C139.20683594 217.80738281 139.74179687 218.70070313 140.29296875 219.62109375 C140.84855469 220.56597656 141.40414063 221.51085937 141.9765625 222.484375 C142.53988281 223.42152344 143.10320312 224.35867188 143.68359375 225.32421875 C147.8515625 232.33811289 147.8515625 232.33811289 147.8515625 234.609375 C148.8415625 234.939375 149.8315625 235.269375 150.8515625 235.609375 C152.0390625 239.171875 152.0390625 239.171875 152.8515625 242.609375 C153.5115625 242.609375 154.1715625 242.609375 154.8515625 242.609375 C156.19014774 244.89811673 157.52257264 247.19007156 158.8515625 249.484375 C159.233125 250.13535156 159.6146875 250.78632813 160.0078125 251.45703125 C162.8515625 256.3828125 162.8515625 256.3828125 162.8515625 258.609375 C163.5115625 258.609375 164.1715625 258.609375 164.8515625 258.609375 C165.5115625 260.589375 166.1715625 262.569375 166.8515625 264.609375 C167.5115625 264.609375 168.1715625 264.609375 168.8515625 264.609375 C170.11669922 266.3659668 170.11669922 266.3659668 171.53125 268.80859375 C172.04816406 269.68837891 172.56507813 270.56816406 173.09765625 271.47460938 C173.90396484 272.87163086 173.90396484 272.87163086 174.7265625 274.296875 C177.85245065 279.67781385 180.8928549 284.79121115 184.8515625 289.609375 C185.77831366 291.24783009 186.6559739 292.91525661 187.4765625 294.609375 C187.88132812 295.434375 188.28609375 296.259375 188.703125 297.109375 C189.83842645 299.58077951 190.86508803 302.07531214 191.8515625 304.609375 C192.5115625 304.609375 193.1715625 304.609375 193.8515625 304.609375 C195.19014774 306.89811673 196.52257264 309.19007156 197.8515625 311.484375 C198.233125 312.13535156 198.6146875 312.78632813 199.0078125 313.45703125 C201.8515625 318.3828125 201.8515625 318.3828125 201.8515625 320.609375 C202.8415625 320.939375 203.8315625 321.269375 204.8515625 321.609375 C205.1815625 323.259375 205.5115625 324.909375 205.8515625 326.609375 C206.5115625 326.609375 207.1715625 326.609375 207.8515625 326.609375 C208.32464844 327.46917969 208.79773438 328.32898438 209.28515625 329.21484375 C213.48910504 336.75851867 217.98754175 343.88048196 223.06640625 350.8671875 C224.65218147 353.3031048 225.24729727 354.84883701 225.8515625 357.609375 C226.5115625 357.939375 227.1715625 358.269375 227.8515625 358.609375 C228.52414917 360.94100878 229.19003694 363.2745789 229.8515625 365.609375 C230.79883204 367.30656627 231.79384511 368.97872736 232.8515625 370.609375 C233.5115625 371.929375 234.1715625 373.249375 234.8515625 374.609375 C237.8215625 373.949375 240.7915625 373.289375 243.8515625 372.609375 C244.1815625 371.289375 244.5115625 369.969375 244.8515625 368.609375 C246.0890625 368.34125 247.3265625 368.073125 248.6015625 367.796875 C252.02361528 366.95943603 254.07461256 365.79126424 256.8515625 363.609375 C258.1715625 363.609375 259.4915625 363.609375 260.8515625 363.609375 C260.8515625 362.949375 260.8515625 362.289375 260.8515625 361.609375 C262.3365625 361.02929688 262.3365625 361.02929688 263.8515625 360.4375 C272.14553639 357.23837306 272.14553639 357.23837306 280.1640625 353.421875 C282.89342888 351.98413596 285.49712373 351.09588443 288.4765625 350.296875 C293.48563471 348.89095442 297.9086097 346.69245267 302.52001953 344.30639648 C307.35112478 341.8171468 312.2678411 339.7000298 317.3046875 337.66796875 C320.00718042 336.58695346 320.00718042 336.58695346 323.1015625 334.921875 C325.8515625 333.609375 325.8515625 333.609375 329.3515625 332.859375 C334.07263985 331.78722194 338.13702328 329.56856399 342.41796875 327.35961914 C349.10056271 323.92441526 355.94308286 320.81448956 363.1328125 318.59765625 C365.98620082 317.9132887 365.98620082 317.9132887 366.8515625 315.609375 C369.1125127 314.61778257 371.35381932 313.72032468 373.6640625 312.859375 C379.66779576 310.54942164 385.37487469 307.9216795 391.09765625 304.97265625 C393.61008272 303.72891606 396.10967017 302.67182573 398.7265625 301.671875 C402.9026668 300.06723042 406.87100902 298.1422815 410.8515625 296.109375 C415.56184557 293.70389648 420.28588625 291.58838304 425.2265625 289.703125 C428.51797991 288.33170108 431.67821264 286.72994418 434.8515625 285.109375 C438.75005867 283.1185762 442.62880211 281.22405697 446.7265625 279.671875 C451.99555353 277.66339822 456.94135762 275.09144251 461.95947266 272.53588867 C466.3730876 270.30402164 470.80290606 268.35601318 475.4296875 266.6015625 C479.36830698 264.98799903 483.10932858 262.98810462 486.8984375 261.0546875 C490.38477183 259.34841276 493.93537058 257.93376743 497.5546875 256.5390625 C500.39218431 255.39055189 503.07105757 254.01221626 505.7890625 252.609375 C508.92392049 251.08944386 512.17021876 249.87526524 515.4140625 248.609375 C517.62600137 247.7019129 519.72828946 246.70525786 521.8515625 245.609375 C524.71566509 244.13149806 527.59414917 242.89328269 530.6015625 241.734375 C535.43737462 239.850485 540.00447238 237.57489938 544.6015625 235.171875 C547.23556009 233.90553001 549.83281289 232.80741099 552.55078125 231.74609375 C559.01706333 229.2014864 565.20562061 226.12550494 571.43554688 223.05664062 C572.32177734 222.62673828 573.20800781 222.19683594 574.12109375 221.75390625 C574.91104736 221.36565674 575.70100098 220.97740723 576.51489258 220.57739258 C578.95225534 219.56766075 581.25437716 219.04056127 583.8515625 218.609375 C583.8515625 217.949375 583.8515625 217.289375 583.8515625 216.609375 C586.8215625 215.619375 586.8215625 215.619375 589.8515625 214.609375 C589.8515625 213.949375 589.8515625 213.289375 589.8515625 212.609375 C591.37114837 211.56485004 592.94637465 210.60113225 594.5390625 209.671875 C602.28341223 204.90457399 609.41792323 199.04301427 615.8515625 192.609375 C624.6702571 189.82452407 632.44240518 189.40479634 640.8515625 193.609375 C643.91836966 201.59817895 643.24223024 215.35926103 640.2890625 223.234375 C639.171875 225.4609375 639.171875 225.4609375 637.8515625 227.609375 C637.10519531 228.82753906 637.10519531 228.82753906 636.34375 230.0703125 C632.11784086 236.45831469 627.05801603 242.01634435 621.8515625 247.609375 C621.02527344 248.5271875 620.19898438 249.445 619.34765625 250.390625 C611.95611585 258.57652037 604.17627558 266.35444594 596.32519531 274.09887695 C595.46120117 274.95441162 594.59720703 275.80994629 593.70703125 276.69140625 C592.94028076 277.44655518 592.17353027 278.2017041 591.38354492 278.97973633 C589.45760461 280.9799584 587.65812447 282.99098643 585.86004448 285.10032177 C581.20642103 290.43086985 576.1961053 295.39377656 571.18386841 300.38386536 C570.10999883 301.45673727 569.03635383 302.529834 567.96291244 303.60313433 C565.02988795 306.5345222 562.09376891 309.46279296 559.15712786 312.39055717 C555.98424994 315.5549723 552.81431648 318.72233454 549.64405823 321.88937378 C544.15630099 327.37084554 538.66682444 332.85059049 533.17627335 338.32926369 C525.23584785 346.2526912 517.29915354 354.17984805 509.36355184 362.10810646 C496.48448386 374.97524059 483.60391092 387.84086682 470.72167969 400.70483398 C469.95133128 401.47409227 469.18098288 402.24335055 468.38729058 403.03591969 C457.43908288 413.9684951 446.48939337 424.89958521 435.53912042 435.83009198 C434.76695287 436.60086621 433.99478532 437.37164045 433.19921875 438.16577148 C432.04237767 439.32052227 432.04237767 439.32052227 430.86216606 440.49860135 C418.01799515 453.31976412 405.17766371 466.14476409 392.34049404 478.97293681 C384.42131553 486.88625439 376.49888544 494.79628908 368.57228534 502.70217272 C363.1483529 508.1124309 357.72800064 513.52625827 352.31049557 518.94295237 C349.18180869 522.0709331 346.051475 525.19722027 342.91679192 528.31919289 C340.05074998 531.17367391 337.18929596 534.03266983 334.33151065 536.89541634 C333.29375922 537.93331979 332.25429051 538.96950943 331.21299388 540.00385604 C329.80406224 541.40386381 328.40180911 542.81058331 326.99995613 544.21767902 C326.21734984 544.99898381 325.43474354 545.78028859 324.6284219 546.58526927 C322.64581439 548.57959905 322.64581439 548.57959905 321.8515625 551.609375 C320.42111206 553.01734924 320.42111206 553.01734924 318.53076172 554.55688477 C313.27486747 559.02055223 308.46655007 563.89707407 303.6218605 568.79447746 C301.95163652 570.48230223 300.27771243 572.16637807 298.60275269 573.84950256 C293.84736569 578.62918115 289.09789387 583.41470752 284.35253906 588.2043457 C281.43626431 591.14732147 278.51520166 594.08547296 275.59109116 597.02066231 C274.47998022 598.13799059 273.37077158 599.25721389 272.26349258 600.37833977 C270.72457653 601.93636208 269.17969961 603.48822805 267.63330078 605.03881836 C266.75586212 605.92371445 265.87842346 606.80861053 264.97439575 607.72032166 C262.8515625 609.609375 262.8515625 609.609375 260.8515625 609.609375 C260.6040625 610.16625 260.3565625 610.723125 260.1015625 611.296875 C256.6937181 617.60138714 252.27690494 620.69440304 245.8515625 623.609375 C245.1915625 623.609375 244.5315625 623.609375 243.8515625 623.609375 C243.5215625 624.599375 243.1915625 625.589375 242.8515625 626.609375 C240.5550255 627.7576435 239.26843083 627.72498675 236.71875 627.70703125 C235.91308594 627.70380859 235.10742188 627.70058594 234.27734375 627.69726562 C233.43558594 627.68888672 232.59382813 627.68050781 231.7265625 627.671875 C230.87707031 627.66736328 230.02757812 627.66285156 229.15234375 627.65820312 C227.05205341 627.64640374 224.9517992 627.62846806 222.8515625 627.609375 C222.8515625 626.949375 222.8515625 626.289375 222.8515625 625.609375 C221.97242188 625.49207031 221.09328125 625.37476563 220.1875 625.25390625 C213.6074584 623.98258674 207.87913309 621.17665863 203.6796875 615.859375 C202.36184507 613.79299807 201.06928819 611.71030592 199.80078125 609.61328125 C197.9256602 606.72356564 196.03122586 604.59421111 193.5390625 602.234375 C189.34366803 598.23944307 185.80451223 593.89279221 182.28320312 589.3137207 C179.20276749 585.31369685 176.04014113 581.40189483 172.80126953 577.52905273 C166.58564323 570.09665171 160.73344493 562.47845651 155.04077148 554.6394043 C150.69593925 548.68271062 146.14821373 542.93446349 141.46240234 537.24365234 C138.19694169 533.27624229 135.02233286 529.26383941 131.9140625 525.171875 C126.34523708 517.87292906 120.48130555 510.8267069 114.62744141 503.75585938 C106.99577887 494.53155679 99.5080117 485.25009755 92.38378906 475.62670898 C88.20970329 470.01597076 83.841193 464.58079915 79.390625 459.1875 C76.23442093 455.35496649 73.21071046 451.45096579 70.24902344 447.46630859 C68.37430673 444.9752018 66.40439158 442.57122584 64.4140625 440.171875 C61.15813027 436.218243 57.97678858 432.22211018 54.84765625 428.16796875 C52.29477017 424.89567837 49.69861443 421.65915525 47.1015625 418.421875 C41.77017762 411.77262905 36.49188087 405.08366547 31.23681641 398.37402344 C29.79336689 396.53524072 28.3445754 394.70077332 26.89453125 392.8671875 C26.40605713 392.24851807 25.91758301 391.62984863 25.41430664 390.99243164 C24.49154649 389.82397817 23.56765361 388.65641785 22.64233398 387.48999023 C20.43768063 384.69463242 18.31823987 381.86952574 16.28125 378.94921875 C14.35157553 376.21557605 12.24181254 373.95760893 9.8515625 371.609375 C8.15466661 369.48009698 6.49034346 367.34450127 4.8515625 365.171875 C0.1116929 357.97927232 0.1116929 357.97927232 -6.1484375 352.609375 C-7.16376542 350.95200148 -8.16034555 349.28312889 -9.1484375 347.609375 C-10.70792533 345.48007432 -12.28072642 343.38051881 -13.8984375 341.296875 C-14.34018311 340.72582031 -14.78192871 340.15476562 -15.23706055 339.56640625 C-20.17836653 333.22316502 -25.37373873 327.2090829 -31.1484375 321.609375 C-31.1484375 322.269375 -31.1484375 322.929375 -31.1484375 323.609375 C-31.8084375 323.609375 -32.4684375 323.609375 -33.1484375 323.609375 C-33.37917969 324.56714844 -33.60992187 325.52492188 -33.84765625 326.51171875 C-36.3178149 336.63885566 -39.13522162 346.63118472 -42.1484375 356.609375 C-43.1384375 356.609375 -44.1284375 356.609375 -45.1484375 356.609375 C-45.24133057 357.17245361 -45.33422363 357.73553223 -45.42993164 358.31567383 C-46.79968265 365.88606861 -49.1108401 373.02352739 -51.5859375 380.296875 C-51.98103516 381.48087891 -52.37613281 382.66488281 -52.78320312 383.88476562 C-55.98285973 393.38790545 -55.98285973 393.38790545 -57.83984375 397.56640625 C-59.13424119 400.57636328 -59.93526019 403.41705752 -60.6484375 406.609375 C-61.75903838 411.26001617 -63.14962903 415.27862331 -65.1484375 419.609375 C-67.34018855 425.32270359 -69.38800096 431.08015954 -71.3984375 436.859375 C-72.02462066 438.65629145 -72.65092582 440.45316538 -73.27734375 442.25 C-73.59203613 443.15298828 -73.90672852 444.05597656 -74.23095703 444.98632812 C-75.06043079 447.35776668 -75.89724626 449.72639224 -76.73828125 452.09375 C-81.23437336 464.78198028 -85.48520586 477.54939121 -89.7097168 490.33007812 C-93.0662374 500.46838668 -96.55940731 510.55117325 -100.1484375 520.609375 C-100.58019287 521.82447754 -101.01194824 523.03958008 -101.45678711 524.29150391 C-103.51903986 530.08520204 -105.60543755 535.86926204 -107.71875 541.64453125 C-108.14027344 542.80404297 -108.56179687 543.96355469 -108.99609375 545.15820312 C-109.84982497 547.50661669 -110.70923354 549.85297387 -111.57421875 552.19726562 C-114.04560591 559.0297006 -115.99286138 565.72663012 -117.37060547 572.86499023 C-118.19553698 575.77555367 -119.32488985 577.23977694 -121.1484375 579.609375 C-122.24455487 582.3767439 -122.24455487 582.3767439 -123.12109375 585.44140625 C-123.46333984 586.56998047 -123.80558594 587.69855469 -124.15820312 588.86132812 C-124.50560547 590.03630859 -124.85300781 591.21128906 -125.2109375 592.421875 C-125.56220703 593.58525391 -125.91347656 594.74863281 -126.27539062 595.94726562 C-127.65767319 600.5383251 -129.0217208 605.13394641 -130.33203125 609.74609375 C-130.89306454 611.71373683 -131.50141527 613.66830832 -132.1484375 615.609375 C-134.4609375 615.609375 -134.4609375 615.609375 -137.1484375 614.609375 C-137.91504506 612.6928561 -138.67086807 610.77061516 -139.34692383 608.8203125 C-140.57137735 605.44271545 -142.19768802 602.30161188 -143.8359375 599.109375 C-144.55348682 597.69275969 -145.27093199 596.27609162 -145.98828125 594.859375 C-146.53137939 593.79203125 -146.53137939 593.79203125 -147.08544922 592.703125 C-148.70513517 589.51285704 -150.30118412 586.31091446 -151.8984375 583.109375 C-152.5624462 581.78252516 -153.22651124 580.45570351 -153.890625 579.12890625 C-155.58886165 575.73320279 -157.27963999 572.33384565 -158.96875 568.93359375 C-166.14630829 554.50303389 -173.51966371 540.19438165 -181.15966797 526.00341797 C-184.13668852 520.43961322 -187.05227452 514.85815834 -189.859375 509.20703125 C-190.56209952 507.79667515 -191.2650699 506.38644153 -191.96826172 504.97631836 C-192.32724548 504.25636688 -192.68622925 503.53641541 -193.05609131 502.79464722 C-194.48503762 499.93599608 -195.92374709 497.08233206 -197.36380005 494.22926331 C-198.77435529 491.43422187 -200.1812085 488.63732429 -201.58789062 485.84033203 C-202.3078888 484.4106119 -203.02929156 482.98159841 -203.75195312 481.55322266 C-204.8149063 479.45138851 -205.87279543 477.34707449 -206.9296875 475.2421875 C-207.41701355 474.28301926 -207.41701355 474.28301926 -207.91418457 473.30447388 C-210.1484375 468.83711402 -210.1484375 468.83711402 -210.1484375 466.609375 C-210.8084375 466.609375 -211.4684375 466.609375 -212.1484375 466.609375 C-212.55191406 465.4646875 -212.95539063 464.32 -213.37109375 463.140625 C-215.08362223 458.58188019 -217.26499445 454.38292346 -219.5859375 450.109375 C-223.75424785 442.30741632 -227.80284541 434.45133283 -231.7734375 426.546875 C-232.30638428 425.49371094 -232.83933105 424.44054687 -233.38842773 423.35546875 C-234.12428101 421.8859375 -234.12428101 421.8859375 -234.875 420.38671875 C-235.31408691 419.51265381 -235.75317383 418.63858887 -236.20556641 417.73803711 C-237.1484375 415.609375 -237.1484375 415.609375 -237.1484375 413.609375 C-237.8084375 413.609375 -238.4684375 413.609375 -239.1484375 413.609375 C-239.55191406 412.62839844 -239.95539063 411.64742187 -240.37109375 410.63671875 C-242.20799684 406.35204802 -244.37487499 402.27286073 -246.5859375 398.171875 C-250.24308302 391.3571266 -253.73876625 384.48050528 -257.1484375 377.5390625 C-257.4784375 376.87003906 -257.8084375 376.20101563 -258.1484375 375.51171875 C-258.81820537 374.15386904 -259.48484686 372.79447299 -260.1484375 371.43359375 C-261.71106815 368.27781231 -263.30597367 365.37379605 -265.26953125 362.4375 C-267.02126286 359.80079795 -268.13846724 357.44643573 -269.2109375 354.484375 C-270.17023177 351.84116934 -271.00309992 349.80097291 -272.70703125 347.5546875 C-275.92121067 343.21685186 -275.60933008 337.79441654 -275.1484375 332.609375 C-273.28999074 326.33711718 -269.39286038 321.57127195 -265.48681641 316.39257812 C-263.40305148 313.61625215 -261.35139 310.81646296 -259.29541016 308.01953125 C-257.48962555 305.56338553 -255.68080194 303.10950598 -253.87109375 300.65625 C-244.72818516 288.26119804 -235.59077566 275.86226981 -226.48828125 263.4375 C-225.09456001 261.53586285 -223.6997611 259.63502023 -222.3046875 257.734375 C-218.30437532 252.28376135 -214.30557015 246.83240044 -210.3359375 241.359375 C-206.73740302 236.40221015 -203.09963144 231.47457097 -199.4609375 226.546875 C-194.77488303 220.20027411 -190.1289972 213.82710079 -185.5234375 207.421875 C-178.77052396 198.03697273 -171.83029068 188.79867324 -164.85546875 179.578125 C-160.50299762 173.80654215 -156.24183218 167.97937951 -152.0234375 162.109375 C-146.69438265 154.69442297 -141.24452798 147.37815387 -135.74682617 140.08764648 C-131.54028162 134.49756308 -127.41332908 128.85672309 -123.3359375 123.171875 C-118.82479069 116.88489004 -114.20506861 110.70638046 -109.4609375 104.59375 C-104.55341106 98.26038818 -99.77482315 91.83062768 -95.03515625 85.37109375 C-88.68978244 76.72463022 -82.28852851 68.12899249 -75.7734375 59.609375 C-70.47115141 52.67341158 -65.23431147 45.70617035 -60.1484375 38.609375 C-59.16860777 37.25604752 -58.18807393 35.9032297 -57.20703125 34.55078125 C-51.10920803 26.13816216 -45.05713529 17.69673797 -39.10644531 9.17919922 C-28.87476098 -5.41148252 -16.25736417 -10.52294845 0 0 Z " fill="currentColor" transform="translate(318.1484375,160.390625)"/>
  <path d="M0 0 C5.29782134 -0.07511089 10.59532124 -0.12904757 15.89355469 -0.16479492 C17.68950817 -0.17972375 19.48542623 -0.20007424 21.28125 -0.22631836 C47.45828637 -0.59881525 47.45828637 -0.59881525 59.11328125 5.94921875 C61.35293252 7.19656076 63.65292446 8.22019787 66 9.25 C67.1446875 9.75273437 67.1446875 9.75273437 68.3125 10.265625 C68.869375 10.50796875 69.42625 10.7503125 70 11 C70 11.66 70 12.32 70 13 C70.845625 13.226875 71.69125 13.45375 72.5625 13.6875 C76.0224622 15.00857648 78.31068552 16.58003372 81.21875 18.79296875 C83.16764164 20.21942327 83.16764164 20.21942327 86.4375 21.25 C90.75470245 23.37073103 92.90942943 26.01909926 95.95703125 29.66796875 C97.8896907 31.87408288 99.87053104 33.69451143 102.125 35.5625 C107.04677266 39.7367845 111.74408255 44.48943944 113 51 C113.66 51 114.32 51 115 51 C116.69178888 54.32117571 118.35403025 57.65588278 120 61 C120.33386719 61.67160156 120.66773438 62.34320313 121.01171875 63.03515625 C131.04579958 84.33111682 133.95197279 105.7148386 131 129 C130.34 129 129.68 129 129 129 C128.95101562 129.556875 128.90203125 130.11375 128.8515625 130.6875 C127.98287007 139.55415375 125.93290405 146.99857452 122 155 C121.51660156 155.99128906 121.03320312 156.98257813 120.53515625 158.00390625 C116.21194234 166.45706098 111.04987394 173.73831867 105 181 C103.79150391 182.45792969 103.79150391 182.45792969 102.55859375 183.9453125 C91.49976673 196.69047751 77.14074549 205.79397675 62 213 C61.00806641 213.53173828 61.00806641 213.53173828 59.99609375 214.07421875 C57.15796374 215.39053345 54.27620914 215.85113797 51.21875 216.4375 C49.01161377 216.89673073 49.01161377 216.89673073 47.25634766 217.96630859 C38.11209214 222.15552931 25.9842524 221.38770522 16.125 221.375 C14.81015625 221.37338867 13.4953125 221.37177734 12.140625 221.37011719 C2.39975579 221.24715077 -5.78435568 220.08247414 -15 217 C-17.45742586 216.35072222 -19.91575182 215.70484094 -22.375 215.0625 C-28.30582138 213.35534843 -33.62685337 211.02084741 -39 208 C-39 207.34 -39 206.68 -39 206 C-39.86367188 205.76023437 -40.72734375 205.52046875 -41.6171875 205.2734375 C-57.20278552 199.40634171 -70.45230034 182.63485673 -79 169 C-79.35578125 168.44586426 -79.7115625 167.89172852 -80.078125 167.32080078 C-91.95886098 148.67643929 -95.20012115 127.89246265 -95.375 106.0625 C-95.38893799 104.94963623 -95.40287598 103.83677246 -95.41723633 102.69018555 C-95.37349732 95.05858155 -94.17790981 88.30138493 -92 81 C-91.76506836 80.19167725 -91.53013672 79.38335449 -91.28808594 78.55053711 C-86.77167752 63.51038018 -80.30755955 51.72763584 -70.33935547 39.63037109 C-69.42083574 38.51227508 -68.51413854 37.38439241 -67.61767578 36.24853516 C-66.45608345 34.79579986 -65.23272998 33.39287952 -64 32 C-63.34 32 -62.68 32 -62 32 C-62 31.34 -62 30.68 -62 30 C-44.29084883 13.48972754 -24.42958603 2.38117085 0 2 C0 1.34 0 0.68 0 0 Z" fill="currentColor" transform="translate(604,146)"/>
  <path d="M0 0 C5.29782134 -0.07511089 10.59532124 -0.12904757 15.89355469 -0.16479492 C17.68950817 -0.17972375 19.48542623 -0.20007424 21.28125 -0.22631836 C35.27394443 -0.42543315 48.54517159 -0.22380048 61 7 C57.96594943 8.51702529 56.11751204 7.22073009 52.9375 6.1875 C35.83321458 1.04386789 17.70459062 1.46220198 0 1 C0 0.67 0 0.34 0 0 Z" fill="currentColor" transform="translate(604,146)"/>
  <path d="M0 0 C0.66 0.33 1.32 0.66 2 1 C-2.43822338 8.52568313 -8.70459343 15.80945901 -17 19 C-15.32598022 15.04322598 -12.86850715 12.15535787 -10 9 C-9.34 9 -8.68 9 -8 9 C-8 8.34 -8 7.68 -8 7 C-6.25 5.2734375 -6.25 5.2734375 -4 3.375 C-3.2575 2.74335938 -2.515 2.11171875 -1.75 1.4609375 C-0.88375 0.73777344 -0.88375 0.73777344 0 0 Z" fill="currentColor" transform="translate(550,169)"/>
  <path d="M0 0 C0 4.10746566 -1.63960436 5.19754861 -4.375 8.1875 C-5.18710937 9.08855469 -5.99921875 9.98960937 -6.8359375 10.91796875 C-9 13 -9 13 -11 13 C-11.33 13.99 -11.66 14.98 -12 16 C-12.66 15.67 -13.32 15.34 -14 15 C-9.96886123 9.12125596 -5.52964597 4.49108302 0 0 Z" fill="currentColor" transform="translate(587,763)"/>
  <path d="M0 0 C0.33 0.99 0.66 1.98 1 3 C-0.3984375 5.41015625 -0.3984375 5.41015625 -2.375 8.0625 C-4.89507622 11.40431208 -4.89507622 11.40431208 -7 15 C-7.66 14.67 -8.32 14.34 -9 14 C-7.65070536 10.16336928 -5.92248975 7.34827431 -3.375 4.1875 C-2.42753906 3.00220703 -2.42753906 3.00220703 -1.4609375 1.79296875 C-0.97882813 1.20128906 -0.49671875 0.60960937 0 0 Z" fill="currentColor" transform="translate(130,372)"/>
  <path d="M0 0 C0 0.66 0 1.32 0 2 C-6.93 5.465 -6.93 5.465 -14 9 C-14.66 8.34 -15.32 7.68 -16 7 C-13.71070947 5.82845707 -11.41881638 4.66261926 -9.125 3.5 C-8.47402344 3.16613281 -7.82304688 2.83226562 -7.15234375 2.48828125 C-2.2265625 0 -2.2265625 0 0 0 Z" fill="currentColor" transform="translate(896,381)"/>
  <path d="M0 0 C0.66 0.33 1.32 0.66 2 1 C0.76055724 1.86941494 -0.49207059 2.72005457 -1.75 3.5625 C-2.44609375 4.03816406 -3.1421875 4.51382812 -3.859375 5.00390625 C-6 6 -6 6 -8.265625 5.65234375 C-8.83796875 5.43707031 -9.4103125 5.22179687 -10 5 C-8.38007835 4.13624104 -6.75388139 3.28424146 -5.125 2.4375 C-4.22007812 1.96183594 -3.31515625 1.48617188 -2.3828125 0.99609375 C-1.20332031 0.50302734 -1.20332031 0.50302734 0 0 Z" fill="currentColor" transform="translate(826,412)"/>
  <path d="M0 0 C1.60875 0.2784375 1.60875 0.2784375 3.25 0.5625 C6.40391546 0.9304568 8.09818492 1.04465343 11 0 C11 0.66 11 1.32 11 2 C7.62902617 3.49821059 5.79557881 4 2 4 C1.34 2.68 0.68 1.36 0 0 Z" fill="currentColor" transform="translate(551,531)"/>
  <path d="M0 0 C0.33 0.99 0.66 1.98 1 3 C-1.97 5.475 -1.97 5.475 -5 8 C-5 5 -5 5 -2.5 2.3125 C-1.675 1.549375 -0.85 0.78625 0 0 Z" fill="currentColor" transform="translate(789,557)"/>
  <path d="M0 0 C0.99 0.33 1.98 0.66 3 1 C-0.465 3.97 -0.465 3.97 -4 7 C-4 4 -4 4 -2 1.8125 C-1.34 1.214375 -0.68 0.61625 0 0 Z" fill="currentColor" transform="translate(943,401)"/>
  <path d="M0 0 C1.0326802 2.78823655 1.04509293 3.8677274 0.0625 6.75 C-0.288125 7.4925 -0.63875 8.235 -1 9 C-1.33 9 -1.66 9 -2 9 C-2 6.69 -2 4.38 -2 2 C-1.34 2 -0.68 2 0 2 C0 1.34 0 0.68 0 0 Z" fill="currentColor" transform="translate(200,728)"/>
</svg>
            {/* <Bot className="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 text-gray-400" /> */}
            <p className="text-base sm:text-lg">Start a conversation with Hask AI</p>
            <p className="text-xs sm:text-sm text-gray-400 mt-2">
              Ask me anything and I'll help you! You can also share personal details like your name, age, location, etc.
            </p>
            {/* Debug info */}
            <div className="mt-4 text-xs text-gray-400">
              Debug: Current stored name = "{personalDetails.name || 'empty'}"
            </div>
          </div>
        )}

        {messages.map((message, index) => (
          <div
            key={index}
            className={`flex items-start gap-2 sm:gap-3 ${
              message.sender === 'user' ? 'flex-row-reverse' : 'flex-row'
            }`}
          >
            {/* Avatar */}
            <div className={`flex-shrink-0 sm:w-8 sm:h-8 rounded-full flex items-center justify-center ${
              message.sender === 'user' 
                ? 'bg-blue-600 text-white w-6 h-6' 
                : message.isLocal
                ? 'bg-gray-100 text-blue-600 w-5 h-5 border-2 border-solid border-blue-600'
                : 'bg-gray-100 text-blue-600 w-5 h-5 border-2 border-solid border-blue-600'
            }`}>
              {message.sender === 'user' ? (
                <User className="w-3 h-3 sm:w-4 sm:h-4" />
              ) : (
                // <Bot className="w-3 h-3 sm:w-4 sm:h-4" />
                <svg className="md:w-6 md:h-6 rounded-full" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 907">
  <path d="M0 0 C337.92 0 675.84 0 1024 0 C1024 299.31 1024 598.62 1024 907 C686.08 907 348.16 907 0 907 C0 607.69 0 308.38 0 0 Z" fill="#FEFEFE" transform="translate(0,0)"/>
  <path d="M0 0 C3.77737005 3.02827135 6.0804079 6.02521014 7.8515625 10.609375 C7.8515625 11.269375 7.8515625 11.929375 7.8515625 12.609375 C8.5115625 12.609375 9.1715625 12.609375 9.8515625 12.609375 C12.6909677 16.28389938 13.8515625 17.87824081 13.8515625 22.609375 C14.5115625 22.609375 15.1715625 22.609375 15.8515625 22.609375 C16.09390625 23.14046875 16.33625 23.6715625 16.5859375 24.21875 C16.92109375 24.92515625 17.25625 25.6315625 17.6015625 26.359375 C18.08882813 27.40351563 18.08882813 27.40351563 18.5859375 28.46875 C19.76959796 30.69195678 19.76959796 30.69195678 21.7109375 32.3828125 C24.61698284 35.4055239 26.37573805 38.80920665 28.3515625 42.484375 C31.53929462 48.36063468 31.53929462 48.36063468 35.1328125 53.9921875 C36.8515625 56.609375 36.8515625 56.609375 36.8515625 58.609375 C37.5115625 58.609375 38.1715625 58.609375 38.8515625 58.609375 C41.8515625 64.359375 41.8515625 64.359375 41.8515625 66.609375 C42.5115625 66.609375 43.1715625 66.609375 43.8515625 66.609375 C45.578125 69.1640625 45.578125 69.1640625 47.4765625 72.484375 C48.42402344 74.12019531 48.42402344 74.12019531 49.390625 75.7890625 C50.8515625 78.609375 50.8515625 78.609375 50.8515625 80.609375 C51.5115625 80.609375 52.1715625 80.609375 52.8515625 80.609375 C55.59531921 83.56418992 55.8515625 84.38409408 55.8515625 88.609375 C56.5115625 88.609375 57.1715625 88.609375 57.8515625 88.609375 C59.32421875 90.65625 59.32421875 90.65625 60.9140625 93.359375 C61.70490234 94.68195313 61.70490234 94.68195313 62.51171875 96.03125 C63.67995737 98.2791727 64.38377032 100.13758424 64.8515625 102.609375 C65.5115625 102.609375 66.1715625 102.609375 66.8515625 102.609375 C68.2265625 104.453125 68.2265625 104.453125 69.8515625 107.109375 C70.78742188 108.62144531 70.78742188 108.62144531 71.7421875 110.1640625 C72.08185547 110.71932617 72.42152344 111.27458984 72.77148438 111.84667969 C74.69605375 114.98759083 76.6501721 118.11008255 78.6015625 121.234375 C79.02244141 121.90911865 79.44332031 122.5838623 79.87695312 123.27905273 C82.99585298 128.2689418 86.1573956 133.22985005 89.3515625 138.171875 C89.80490967 138.87441406 90.25825684 139.57695312 90.7253418 140.30078125 C93.00715146 143.82112521 95.32127317 147.31330048 97.69921875 150.76953125 C98.15554688 151.43718506 98.611875 152.10483887 99.08203125 152.79272461 C99.93960231 154.04277275 100.80491883 155.28756036 101.6796875 156.52563477 C104.40864751 160.50971239 105.76047991 163.97374842 106.8515625 168.609375 C107.5115625 168.609375 108.1715625 168.609375 108.8515625 168.609375 C110.30989568 170.64626981 111.62383301 172.65726367 112.9140625 174.796875 C113.27822266 175.37501953 113.64238281 175.95316406 114.01757812 176.54882812 C116.04972307 179.87313177 117.3767717 182.73069943 117.8515625 186.609375 C118.5115625 186.609375 119.1715625 186.609375 119.8515625 186.609375 C120.1815625 187.929375 120.5115625 189.249375 120.8515625 190.609375 C121.5115625 190.609375 122.1715625 190.609375 122.8515625 190.609375 C123.52311183 191.89850987 124.18865109 193.19077704 124.8515625 194.484375 C125.2228125 195.20367187 125.5940625 195.92296875 125.9765625 196.6640625 C126.8515625 198.609375 126.8515625 198.609375 126.8515625 200.609375 C127.5115625 200.609375 128.1715625 200.609375 128.8515625 200.609375 C130.140625 202.21875 130.140625 202.21875 131.4765625 204.359375 C131.92257812 205.05546875 132.36859375 205.7515625 132.828125 206.46875 C133.8515625 208.609375 133.8515625 208.609375 133.8515625 212.609375 C134.5115625 212.609375 135.1715625 212.609375 135.8515625 212.609375 C137.18017578 214.41357422 137.18017578 214.41357422 138.671875 216.9140625 C139.20683594 217.80738281 139.74179687 218.70070313 140.29296875 219.62109375 C140.84855469 220.56597656 141.40414063 221.51085937 141.9765625 222.484375 C142.53988281 223.42152344 143.10320312 224.35867188 143.68359375 225.32421875 C147.8515625 232.33811289 147.8515625 232.33811289 147.8515625 234.609375 C148.8415625 234.939375 149.8315625 235.269375 150.8515625 235.609375 C152.0390625 239.171875 152.0390625 239.171875 152.8515625 242.609375 C153.5115625 242.609375 154.1715625 242.609375 154.8515625 242.609375 C156.19014774 244.89811673 157.52257264 247.19007156 158.8515625 249.484375 C159.233125 250.13535156 159.6146875 250.78632813 160.0078125 251.45703125 C162.8515625 256.3828125 162.8515625 256.3828125 162.8515625 258.609375 C163.5115625 258.609375 164.1715625 258.609375 164.8515625 258.609375 C165.5115625 260.589375 166.1715625 262.569375 166.8515625 264.609375 C167.5115625 264.609375 168.1715625 264.609375 168.8515625 264.609375 C170.11669922 266.3659668 170.11669922 266.3659668 171.53125 268.80859375 C172.04816406 269.68837891 172.56507813 270.56816406 173.09765625 271.47460938 C173.90396484 272.87163086 173.90396484 272.87163086 174.7265625 274.296875 C177.85245065 279.67781385 180.8928549 284.79121115 184.8515625 289.609375 C185.77831366 291.24783009 186.6559739 292.91525661 187.4765625 294.609375 C187.88132812 295.434375 188.28609375 296.259375 188.703125 297.109375 C189.83842645 299.58077951 190.86508803 302.07531214 191.8515625 304.609375 C192.5115625 304.609375 193.1715625 304.609375 193.8515625 304.609375 C195.19014774 306.89811673 196.52257264 309.19007156 197.8515625 311.484375 C198.233125 312.13535156 198.6146875 312.78632813 199.0078125 313.45703125 C201.8515625 318.3828125 201.8515625 318.3828125 201.8515625 320.609375 C202.8415625 320.939375 203.8315625 321.269375 204.8515625 321.609375 C205.1815625 323.259375 205.5115625 324.909375 205.8515625 326.609375 C206.5115625 326.609375 207.1715625 326.609375 207.8515625 326.609375 C208.32464844 327.46917969 208.79773438 328.32898438 209.28515625 329.21484375 C213.48910504 336.75851867 217.98754175 343.88048196 223.06640625 350.8671875 C224.65218147 353.3031048 225.24729727 354.84883701 225.8515625 357.609375 C226.5115625 357.939375 227.1715625 358.269375 227.8515625 358.609375 C228.52414917 360.94100878 229.19003694 363.2745789 229.8515625 365.609375 C230.79883204 367.30656627 231.79384511 368.97872736 232.8515625 370.609375 C233.5115625 371.929375 234.1715625 373.249375 234.8515625 374.609375 C237.8215625 373.949375 240.7915625 373.289375 243.8515625 372.609375 C244.1815625 371.289375 244.5115625 369.969375 244.8515625 368.609375 C246.0890625 368.34125 247.3265625 368.073125 248.6015625 367.796875 C252.02361528 366.95943603 254.07461256 365.79126424 256.8515625 363.609375 C258.1715625 363.609375 259.4915625 363.609375 260.8515625 363.609375 C260.8515625 362.949375 260.8515625 362.289375 260.8515625 361.609375 C262.3365625 361.02929688 262.3365625 361.02929688 263.8515625 360.4375 C272.14553639 357.23837306 272.14553639 357.23837306 280.1640625 353.421875 C282.89342888 351.98413596 285.49712373 351.09588443 288.4765625 350.296875 C293.48563471 348.89095442 297.9086097 346.69245267 302.52001953 344.30639648 C307.35112478 341.8171468 312.2678411 339.7000298 317.3046875 337.66796875 C320.00718042 336.58695346 320.00718042 336.58695346 323.1015625 334.921875 C325.8515625 333.609375 325.8515625 333.609375 329.3515625 332.859375 C334.07263985 331.78722194 338.13702328 329.56856399 342.41796875 327.35961914 C349.10056271 323.92441526 355.94308286 320.81448956 363.1328125 318.59765625 C365.98620082 317.9132887 365.98620082 317.9132887 366.8515625 315.609375 C369.1125127 314.61778257 371.35381932 313.72032468 373.6640625 312.859375 C379.66779576 310.54942164 385.37487469 307.9216795 391.09765625 304.97265625 C393.61008272 303.72891606 396.10967017 302.67182573 398.7265625 301.671875 C402.9026668 300.06723042 406.87100902 298.1422815 410.8515625 296.109375 C415.56184557 293.70389648 420.28588625 291.58838304 425.2265625 289.703125 C428.51797991 288.33170108 431.67821264 286.72994418 434.8515625 285.109375 C438.75005867 283.1185762 442.62880211 281.22405697 446.7265625 279.671875 C451.99555353 277.66339822 456.94135762 275.09144251 461.95947266 272.53588867 C466.3730876 270.30402164 470.80290606 268.35601318 475.4296875 266.6015625 C479.36830698 264.98799903 483.10932858 262.98810462 486.8984375 261.0546875 C490.38477183 259.34841276 493.93537058 257.93376743 497.5546875 256.5390625 C500.39218431 255.39055189 503.07105757 254.01221626 505.7890625 252.609375 C508.92392049 251.08944386 512.17021876 249.87526524 515.4140625 248.609375 C517.62600137 247.7019129 519.72828946 246.70525786 521.8515625 245.609375 C524.71566509 244.13149806 527.59414917 242.89328269 530.6015625 241.734375 C535.43737462 239.850485 540.00447238 237.57489938 544.6015625 235.171875 C547.23556009 233.90553001 549.83281289 232.80741099 552.55078125 231.74609375 C559.01706333 229.2014864 565.20562061 226.12550494 571.43554688 223.05664062 C572.32177734 222.62673828 573.20800781 222.19683594 574.12109375 221.75390625 C574.91104736 221.36565674 575.70100098 220.97740723 576.51489258 220.57739258 C578.95225534 219.56766075 581.25437716 219.04056127 583.8515625 218.609375 C583.8515625 217.949375 583.8515625 217.289375 583.8515625 216.609375 C586.8215625 215.619375 586.8215625 215.619375 589.8515625 214.609375 C589.8515625 213.949375 589.8515625 213.289375 589.8515625 212.609375 C591.37114837 211.56485004 592.94637465 210.60113225 594.5390625 209.671875 C602.28341223 204.90457399 609.41792323 199.04301427 615.8515625 192.609375 C624.6702571 189.82452407 632.44240518 189.40479634 640.8515625 193.609375 C643.91836966 201.59817895 643.24223024 215.35926103 640.2890625 223.234375 C639.171875 225.4609375 639.171875 225.4609375 637.8515625 227.609375 C637.10519531 228.82753906 637.10519531 228.82753906 636.34375 230.0703125 C632.11784086 236.45831469 627.05801603 242.01634435 621.8515625 247.609375 C621.02527344 248.5271875 620.19898438 249.445 619.34765625 250.390625 C611.95611585 258.57652037 604.17627558 266.35444594 596.32519531 274.09887695 C595.46120117 274.95441162 594.59720703 275.80994629 593.70703125 276.69140625 C592.94028076 277.44655518 592.17353027 278.2017041 591.38354492 278.97973633 C589.45760461 280.9799584 587.65812447 282.99098643 585.86004448 285.10032177 C581.20642103 290.43086985 576.1961053 295.39377656 571.18386841 300.38386536 C570.10999883 301.45673727 569.03635383 302.529834 567.96291244 303.60313433 C565.02988795 306.5345222 562.09376891 309.46279296 559.15712786 312.39055717 C555.98424994 315.5549723 552.81431648 318.72233454 549.64405823 321.88937378 C544.15630099 327.37084554 538.66682444 332.85059049 533.17627335 338.32926369 C525.23584785 346.2526912 517.29915354 354.17984805 509.36355184 362.10810646 C496.48448386 374.97524059 483.60391092 387.84086682 470.72167969 400.70483398 C469.95133128 401.47409227 469.18098288 402.24335055 468.38729058 403.03591969 C457.43908288 413.9684951 446.48939337 424.89958521 435.53912042 435.83009198 C434.76695287 436.60086621 433.99478532 437.37164045 433.19921875 438.16577148 C432.04237767 439.32052227 432.04237767 439.32052227 430.86216606 440.49860135 C418.01799515 453.31976412 405.17766371 466.14476409 392.34049404 478.97293681 C384.42131553 486.88625439 376.49888544 494.79628908 368.57228534 502.70217272 C363.1483529 508.1124309 357.72800064 513.52625827 352.31049557 518.94295237 C349.18180869 522.0709331 346.051475 525.19722027 342.91679192 528.31919289 C340.05074998 531.17367391 337.18929596 534.03266983 334.33151065 536.89541634 C333.29375922 537.93331979 332.25429051 538.96950943 331.21299388 540.00385604 C329.80406224 541.40386381 328.40180911 542.81058331 326.99995613 544.21767902 C326.21734984 544.99898381 325.43474354 545.78028859 324.6284219 546.58526927 C322.64581439 548.57959905 322.64581439 548.57959905 321.8515625 551.609375 C320.42111206 553.01734924 320.42111206 553.01734924 318.53076172 554.55688477 C313.27486747 559.02055223 308.46655007 563.89707407 303.6218605 568.79447746 C301.95163652 570.48230223 300.27771243 572.16637807 298.60275269 573.84950256 C293.84736569 578.62918115 289.09789387 583.41470752 284.35253906 588.2043457 C281.43626431 591.14732147 278.51520166 594.08547296 275.59109116 597.02066231 C274.47998022 598.13799059 273.37077158 599.25721389 272.26349258 600.37833977 C270.72457653 601.93636208 269.17969961 603.48822805 267.63330078 605.03881836 C266.75586212 605.92371445 265.87842346 606.80861053 264.97439575 607.72032166 C262.8515625 609.609375 262.8515625 609.609375 260.8515625 609.609375 C260.6040625 610.16625 260.3565625 610.723125 260.1015625 611.296875 C256.6937181 617.60138714 252.27690494 620.69440304 245.8515625 623.609375 C245.1915625 623.609375 244.5315625 623.609375 243.8515625 623.609375 C243.5215625 624.599375 243.1915625 625.589375 242.8515625 626.609375 C240.5550255 627.7576435 239.26843083 627.72498675 236.71875 627.70703125 C235.91308594 627.70380859 235.10742188 627.70058594 234.27734375 627.69726562 C233.43558594 627.68888672 232.59382813 627.68050781 231.7265625 627.671875 C230.87707031 627.66736328 230.02757812 627.66285156 229.15234375 627.65820312 C227.05205341 627.64640374 224.9517992 627.62846806 222.8515625 627.609375 C222.8515625 626.949375 222.8515625 626.289375 222.8515625 625.609375 C221.97242188 625.49207031 221.09328125 625.37476563 220.1875 625.25390625 C213.6074584 623.98258674 207.87913309 621.17665863 203.6796875 615.859375 C202.36184507 613.79299807 201.06928819 611.71030592 199.80078125 609.61328125 C197.9256602 606.72356564 196.03122586 604.59421111 193.5390625 602.234375 C189.34366803 598.23944307 185.80451223 593.89279221 182.28320312 589.3137207 C179.20276749 585.31369685 176.04014113 581.40189483 172.80126953 577.52905273 C166.58564323 570.09665171 160.73344493 562.47845651 155.04077148 554.6394043 C150.69593925 548.68271062 146.14821373 542.93446349 141.46240234 537.24365234 C138.19694169 533.27624229 135.02233286 529.26383941 131.9140625 525.171875 C126.34523708 517.87292906 120.48130555 510.8267069 114.62744141 503.75585938 C106.99577887 494.53155679 99.5080117 485.25009755 92.38378906 475.62670898 C88.20970329 470.01597076 83.841193 464.58079915 79.390625 459.1875 C76.23442093 455.35496649 73.21071046 451.45096579 70.24902344 447.46630859 C68.37430673 444.9752018 66.40439158 442.57122584 64.4140625 440.171875 C61.15813027 436.218243 57.97678858 432.22211018 54.84765625 428.16796875 C52.29477017 424.89567837 49.69861443 421.65915525 47.1015625 418.421875 C41.77017762 411.77262905 36.49188087 405.08366547 31.23681641 398.37402344 C29.79336689 396.53524072 28.3445754 394.70077332 26.89453125 392.8671875 C26.40605713 392.24851807 25.91758301 391.62984863 25.41430664 390.99243164 C24.49154649 389.82397817 23.56765361 388.65641785 22.64233398 387.48999023 C20.43768063 384.69463242 18.31823987 381.86952574 16.28125 378.94921875 C14.35157553 376.21557605 12.24181254 373.95760893 9.8515625 371.609375 C8.15466661 369.48009698 6.49034346 367.34450127 4.8515625 365.171875 C0.1116929 357.97927232 0.1116929 357.97927232 -6.1484375 352.609375 C-7.16376542 350.95200148 -8.16034555 349.28312889 -9.1484375 347.609375 C-10.70792533 345.48007432 -12.28072642 343.38051881 -13.8984375 341.296875 C-14.34018311 340.72582031 -14.78192871 340.15476562 -15.23706055 339.56640625 C-20.17836653 333.22316502 -25.37373873 327.2090829 -31.1484375 321.609375 C-31.1484375 322.269375 -31.1484375 322.929375 -31.1484375 323.609375 C-31.8084375 323.609375 -32.4684375 323.609375 -33.1484375 323.609375 C-33.37917969 324.56714844 -33.60992187 325.52492188 -33.84765625 326.51171875 C-36.3178149 336.63885566 -39.13522162 346.63118472 -42.1484375 356.609375 C-43.1384375 356.609375 -44.1284375 356.609375 -45.1484375 356.609375 C-45.24133057 357.17245361 -45.33422363 357.73553223 -45.42993164 358.31567383 C-46.79968265 365.88606861 -49.1108401 373.02352739 -51.5859375 380.296875 C-51.98103516 381.48087891 -52.37613281 382.66488281 -52.78320312 383.88476562 C-55.98285973 393.38790545 -55.98285973 393.38790545 -57.83984375 397.56640625 C-59.13424119 400.57636328 -59.93526019 403.41705752 -60.6484375 406.609375 C-61.75903838 411.26001617 -63.14962903 415.27862331 -65.1484375 419.609375 C-67.34018855 425.32270359 -69.38800096 431.08015954 -71.3984375 436.859375 C-72.02462066 438.65629145 -72.65092582 440.45316538 -73.27734375 442.25 C-73.59203613 443.15298828 -73.90672852 444.05597656 -74.23095703 444.98632812 C-75.06043079 447.35776668 -75.89724626 449.72639224 -76.73828125 452.09375 C-81.23437336 464.78198028 -85.48520586 477.54939121 -89.7097168 490.33007812 C-93.0662374 500.46838668 -96.55940731 510.55117325 -100.1484375 520.609375 C-100.58019287 521.82447754 -101.01194824 523.03958008 -101.45678711 524.29150391 C-103.51903986 530.08520204 -105.60543755 535.86926204 -107.71875 541.64453125 C-108.14027344 542.80404297 -108.56179687 543.96355469 -108.99609375 545.15820312 C-109.84982497 547.50661669 -110.70923354 549.85297387 -111.57421875 552.19726562 C-114.04560591 559.0297006 -115.99286138 565.72663012 -117.37060547 572.86499023 C-118.19553698 575.77555367 -119.32488985 577.23977694 -121.1484375 579.609375 C-122.24455487 582.3767439 -122.24455487 582.3767439 -123.12109375 585.44140625 C-123.46333984 586.56998047 -123.80558594 587.69855469 -124.15820312 588.86132812 C-124.50560547 590.03630859 -124.85300781 591.21128906 -125.2109375 592.421875 C-125.56220703 593.58525391 -125.91347656 594.74863281 -126.27539062 595.94726562 C-127.65767319 600.5383251 -129.0217208 605.13394641 -130.33203125 609.74609375 C-130.89306454 611.71373683 -131.50141527 613.66830832 -132.1484375 615.609375 C-134.4609375 615.609375 -134.4609375 615.609375 -137.1484375 614.609375 C-137.91504506 612.6928561 -138.67086807 610.77061516 -139.34692383 608.8203125 C-140.57137735 605.44271545 -142.19768802 602.30161188 -143.8359375 599.109375 C-144.55348682 597.69275969 -145.27093199 596.27609162 -145.98828125 594.859375 C-146.53137939 593.79203125 -146.53137939 593.79203125 -147.08544922 592.703125 C-148.70513517 589.51285704 -150.30118412 586.31091446 -151.8984375 583.109375 C-152.5624462 581.78252516 -153.22651124 580.45570351 -153.890625 579.12890625 C-155.58886165 575.73320279 -157.27963999 572.33384565 -158.96875 568.93359375 C-166.14630829 554.50303389 -173.51966371 540.19438165 -181.15966797 526.00341797 C-184.13668852 520.43961322 -187.05227452 514.85815834 -189.859375 509.20703125 C-190.56209952 507.79667515 -191.2650699 506.38644153 -191.96826172 504.97631836 C-192.32724548 504.25636688 -192.68622925 503.53641541 -193.05609131 502.79464722 C-194.48503762 499.93599608 -195.92374709 497.08233206 -197.36380005 494.22926331 C-198.77435529 491.43422187 -200.1812085 488.63732429 -201.58789062 485.84033203 C-202.3078888 484.4106119 -203.02929156 482.98159841 -203.75195312 481.55322266 C-204.8149063 479.45138851 -205.87279543 477.34707449 -206.9296875 475.2421875 C-207.41701355 474.28301926 -207.41701355 474.28301926 -207.91418457 473.30447388 C-210.1484375 468.83711402 -210.1484375 468.83711402 -210.1484375 466.609375 C-210.8084375 466.609375 -211.4684375 466.609375 -212.1484375 466.609375 C-212.55191406 465.4646875 -212.95539063 464.32 -213.37109375 463.140625 C-215.08362223 458.58188019 -217.26499445 454.38292346 -219.5859375 450.109375 C-223.75424785 442.30741632 -227.80284541 434.45133283 -231.7734375 426.546875 C-232.30638428 425.49371094 -232.83933105 424.44054687 -233.38842773 423.35546875 C-234.12428101 421.8859375 -234.12428101 421.8859375 -234.875 420.38671875 C-235.31408691 419.51265381 -235.75317383 418.63858887 -236.20556641 417.73803711 C-237.1484375 415.609375 -237.1484375 415.609375 -237.1484375 413.609375 C-237.8084375 413.609375 -238.4684375 413.609375 -239.1484375 413.609375 C-239.55191406 412.62839844 -239.95539063 411.64742187 -240.37109375 410.63671875 C-242.20799684 406.35204802 -244.37487499 402.27286073 -246.5859375 398.171875 C-250.24308302 391.3571266 -253.73876625 384.48050528 -257.1484375 377.5390625 C-257.4784375 376.87003906 -257.8084375 376.20101563 -258.1484375 375.51171875 C-258.81820537 374.15386904 -259.48484686 372.79447299 -260.1484375 371.43359375 C-261.71106815 368.27781231 -263.30597367 365.37379605 -265.26953125 362.4375 C-267.02126286 359.80079795 -268.13846724 357.44643573 -269.2109375 354.484375 C-270.17023177 351.84116934 -271.00309992 349.80097291 -272.70703125 347.5546875 C-275.92121067 343.21685186 -275.60933008 337.79441654 -275.1484375 332.609375 C-273.28999074 326.33711718 -269.39286038 321.57127195 -265.48681641 316.39257812 C-263.40305148 313.61625215 -261.35139 310.81646296 -259.29541016 308.01953125 C-257.48962555 305.56338553 -255.68080194 303.10950598 -253.87109375 300.65625 C-244.72818516 288.26119804 -235.59077566 275.86226981 -226.48828125 263.4375 C-225.09456001 261.53586285 -223.6997611 259.63502023 -222.3046875 257.734375 C-218.30437532 252.28376135 -214.30557015 246.83240044 -210.3359375 241.359375 C-206.73740302 236.40221015 -203.09963144 231.47457097 -199.4609375 226.546875 C-194.77488303 220.20027411 -190.1289972 213.82710079 -185.5234375 207.421875 C-178.77052396 198.03697273 -171.83029068 188.79867324 -164.85546875 179.578125 C-160.50299762 173.80654215 -156.24183218 167.97937951 -152.0234375 162.109375 C-146.69438265 154.69442297 -141.24452798 147.37815387 -135.74682617 140.08764648 C-131.54028162 134.49756308 -127.41332908 128.85672309 -123.3359375 123.171875 C-118.82479069 116.88489004 -114.20506861 110.70638046 -109.4609375 104.59375 C-104.55341106 98.26038818 -99.77482315 91.83062768 -95.03515625 85.37109375 C-88.68978244 76.72463022 -82.28852851 68.12899249 -75.7734375 59.609375 C-70.47115141 52.67341158 -65.23431147 45.70617035 -60.1484375 38.609375 C-59.16860777 37.25604752 -58.18807393 35.9032297 -57.20703125 34.55078125 C-51.10920803 26.13816216 -45.05713529 17.69673797 -39.10644531 9.17919922 C-28.87476098 -5.41148252 -16.25736417 -10.52294845 0 0 Z " fill="currentColor" transform="translate(318.1484375,160.390625)"/>
  <path d="M0 0 C5.29782134 -0.07511089 10.59532124 -0.12904757 15.89355469 -0.16479492 C17.68950817 -0.17972375 19.48542623 -0.20007424 21.28125 -0.22631836 C47.45828637 -0.59881525 47.45828637 -0.59881525 59.11328125 5.94921875 C61.35293252 7.19656076 63.65292446 8.22019787 66 9.25 C67.1446875 9.75273437 67.1446875 9.75273437 68.3125 10.265625 C68.869375 10.50796875 69.42625 10.7503125 70 11 C70 11.66 70 12.32 70 13 C70.845625 13.226875 71.69125 13.45375 72.5625 13.6875 C76.0224622 15.00857648 78.31068552 16.58003372 81.21875 18.79296875 C83.16764164 20.21942327 83.16764164 20.21942327 86.4375 21.25 C90.75470245 23.37073103 92.90942943 26.01909926 95.95703125 29.66796875 C97.8896907 31.87408288 99.87053104 33.69451143 102.125 35.5625 C107.04677266 39.7367845 111.74408255 44.48943944 113 51 C113.66 51 114.32 51 115 51 C116.69178888 54.32117571 118.35403025 57.65588278 120 61 C120.33386719 61.67160156 120.66773438 62.34320313 121.01171875 63.03515625 C131.04579958 84.33111682 133.95197279 105.7148386 131 129 C130.34 129 129.68 129 129 129 C128.95101562 129.556875 128.90203125 130.11375 128.8515625 130.6875 C127.98287007 139.55415375 125.93290405 146.99857452 122 155 C121.51660156 155.99128906 121.03320312 156.98257813 120.53515625 158.00390625 C116.21194234 166.45706098 111.04987394 173.73831867 105 181 C103.79150391 182.45792969 103.79150391 182.45792969 102.55859375 183.9453125 C91.49976673 196.69047751 77.14074549 205.79397675 62 213 C61.00806641 213.53173828 61.00806641 213.53173828 59.99609375 214.07421875 C57.15796374 215.39053345 54.27620914 215.85113797 51.21875 216.4375 C49.01161377 216.89673073 49.01161377 216.89673073 47.25634766 217.96630859 C38.11209214 222.15552931 25.9842524 221.38770522 16.125 221.375 C14.81015625 221.37338867 13.4953125 221.37177734 12.140625 221.37011719 C2.39975579 221.24715077 -5.78435568 220.08247414 -15 217 C-17.45742586 216.35072222 -19.91575182 215.70484094 -22.375 215.0625 C-28.30582138 213.35534843 -33.62685337 211.02084741 -39 208 C-39 207.34 -39 206.68 -39 206 C-39.86367188 205.76023437 -40.72734375 205.52046875 -41.6171875 205.2734375 C-57.20278552 199.40634171 -70.45230034 182.63485673 -79 169 C-79.35578125 168.44586426 -79.7115625 167.89172852 -80.078125 167.32080078 C-91.95886098 148.67643929 -95.20012115 127.89246265 -95.375 106.0625 C-95.38893799 104.94963623 -95.40287598 103.83677246 -95.41723633 102.69018555 C-95.37349732 95.05858155 -94.17790981 88.30138493 -92 81 C-91.76506836 80.19167725 -91.53013672 79.38335449 -91.28808594 78.55053711 C-86.77167752 63.51038018 -80.30755955 51.72763584 -70.33935547 39.63037109 C-69.42083574 38.51227508 -68.51413854 37.38439241 -67.61767578 36.24853516 C-66.45608345 34.79579986 -65.23272998 33.39287952 -64 32 C-63.34 32 -62.68 32 -62 32 C-62 31.34 -62 30.68 -62 30 C-44.29084883 13.48972754 -24.42958603 2.38117085 0 2 C0 1.34 0 0.68 0 0 Z" fill="currentColor" transform="translate(604,146)"/>
  <path d="M0 0 C5.29782134 -0.07511089 10.59532124 -0.12904757 15.89355469 -0.16479492 C17.68950817 -0.17972375 19.48542623 -0.20007424 21.28125 -0.22631836 C35.27394443 -0.42543315 48.54517159 -0.22380048 61 7 C57.96594943 8.51702529 56.11751204 7.22073009 52.9375 6.1875 C35.83321458 1.04386789 17.70459062 1.46220198 0 1 C0 0.67 0 0.34 0 0 Z" fill="currentColor" transform="translate(604,146)"/>
  <path d="M0 0 C0.66 0.33 1.32 0.66 2 1 C-2.43822338 8.52568313 -8.70459343 15.80945901 -17 19 C-15.32598022 15.04322598 -12.86850715 12.15535787 -10 9 C-9.34 9 -8.68 9 -8 9 C-8 8.34 -8 7.68 -8 7 C-6.25 5.2734375 -6.25 5.2734375 -4 3.375 C-3.2575 2.74335938 -2.515 2.11171875 -1.75 1.4609375 C-0.88375 0.73777344 -0.88375 0.73777344 0 0 Z" fill="currentColor" transform="translate(550,169)"/>
  <path d="M0 0 C0 4.10746566 -1.63960436 5.19754861 -4.375 8.1875 C-5.18710937 9.08855469 -5.99921875 9.98960937 -6.8359375 10.91796875 C-9 13 -9 13 -11 13 C-11.33 13.99 -11.66 14.98 -12 16 C-12.66 15.67 -13.32 15.34 -14 15 C-9.96886123 9.12125596 -5.52964597 4.49108302 0 0 Z" fill="currentColor" transform="translate(587,763)"/>
  <path d="M0 0 C0.33 0.99 0.66 1.98 1 3 C-0.3984375 5.41015625 -0.3984375 5.41015625 -2.375 8.0625 C-4.89507622 11.40431208 -4.89507622 11.40431208 -7 15 C-7.66 14.67 -8.32 14.34 -9 14 C-7.65070536 10.16336928 -5.92248975 7.34827431 -3.375 4.1875 C-2.42753906 3.00220703 -2.42753906 3.00220703 -1.4609375 1.79296875 C-0.97882813 1.20128906 -0.49671875 0.60960937 0 0 Z" fill="currentColor" transform="translate(130,372)"/>
  <path d="M0 0 C0 0.66 0 1.32 0 2 C-6.93 5.465 -6.93 5.465 -14 9 C-14.66 8.34 -15.32 7.68 -16 7 C-13.71070947 5.82845707 -11.41881638 4.66261926 -9.125 3.5 C-8.47402344 3.16613281 -7.82304688 2.83226562 -7.15234375 2.48828125 C-2.2265625 0 -2.2265625 0 0 0 Z" fill="currentColor" transform="translate(896,381)"/>
  <path d="M0 0 C0.66 0.33 1.32 0.66 2 1 C0.76055724 1.86941494 -0.49207059 2.72005457 -1.75 3.5625 C-2.44609375 4.03816406 -3.1421875 4.51382812 -3.859375 5.00390625 C-6 6 -6 6 -8.265625 5.65234375 C-8.83796875 5.43707031 -9.4103125 5.22179687 -10 5 C-8.38007835 4.13624104 -6.75388139 3.28424146 -5.125 2.4375 C-4.22007812 1.96183594 -3.31515625 1.48617188 -2.3828125 0.99609375 C-1.20332031 0.50302734 -1.20332031 0.50302734 0 0 Z" fill="currentColor" transform="translate(826,412)"/>
  <path d="M0 0 C1.60875 0.2784375 1.60875 0.2784375 3.25 0.5625 C6.40391546 0.9304568 8.09818492 1.04465343 11 0 C11 0.66 11 1.32 11 2 C7.62902617 3.49821059 5.79557881 4 2 4 C1.34 2.68 0.68 1.36 0 0 Z" fill="currentColor" transform="translate(551,531)"/>
  <path d="M0 0 C0.33 0.99 0.66 1.98 1 3 C-1.97 5.475 -1.97 5.475 -5 8 C-5 5 -5 5 -2.5 2.3125 C-1.675 1.549375 -0.85 0.78625 0 0 Z" fill="currentColor" transform="translate(789,557)"/>
  <path d="M0 0 C0.99 0.33 1.98 0.66 3 1 C-0.465 3.97 -0.465 3.97 -4 7 C-4 4 -4 4 -2 1.8125 C-1.34 1.214375 -0.68 0.61625 0 0 Z" fill="currentColor" transform="translate(943,401)"/>
  <path d="M0 0 C1.0326802 2.78823655 1.04509293 3.8677274 0.0625 6.75 C-0.288125 7.4925 -0.63875 8.235 -1 9 C-1.33 9 -1.66 9 -2 9 C-2 6.69 -2 4.38 -2 2 C-1.34 2 -0.68 2 0 2 C0 1.34 0 0.68 0 0 Z" fill="currentColor" transform="translate(200,728)"/>
</svg>
              )}
            </div>

            <div
              className={`max-w-[280px] xs:max-w-xs sm:max-w-sm lg:max-w-md px-3 sm:px-4 py-2 sm:py-3 rounded-2xl shadow-sm text-sm sm:text-base ${
                message.sender === 'user'
                  ? 'bg-blue-600 text-white rounded-tr-sm'
                  : message.isLocal
                  ? 'bg-green-50 text-gray-800 border border-green-200 rounded-tl-sm'
                  : 'bg-white text-gray-800 border rounded-tl-sm'
              }`}
            >
              {message.sender === 'bot' ? (
                <div 
                  className="prose prose-sm max-w-[220px] md:max-w-none"
                  dangerouslySetInnerHTML={{ __html: formatResponse(message.text) }}
                />
              ) : (
                <div className="whitespace-pre-wrap">{message.text}</div>
              )}
            </div>
          </div>
        ))}

        {loading && (
          <div className="flex items-start gap-2 sm:gap-3">
            <div className="flex-shrink-0 w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center">
              <Bot className="w-3 h-3 sm:w-4 sm:h-4" />
            </div>
            <div className="bg-white px-3 sm:px-4 py-2 sm:py-3 rounded-2xl rounded-tl-sm shadow-sm border">
              <Loader2 className="w-3 h-3 sm:w-4 sm:h-4 animate-spin text-gray-500" />
            </div>
          </div>
        )}
      </div>

      <div className="p-2 sm:p-4 bg-white border-t">
        <div className="flex gap-2 sm:gap-3">
          <input
            type="text"
            value={inputMessage}
            onChange={(e) => setInputMessage(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && sendMessage(e)}
            placeholder="Type your message... (Try: 'My name is Hari' or 'What is my name?')"
            className="flex-1 px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            disabled={loading}
          />
          <button
            onClick={sendMessage}
            disabled={loading || !inputMessage.trim()}
            className="px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center"
          >
            <Send className="w-3 h-3 sm:w-4 sm:h-4" />
          </button>
        </div>
      </div>
    </div>
  );
};

export default ChatInterface;